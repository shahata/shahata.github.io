"use strict";function hasPossibility(a){return function(b){return b.possibilities.indexOf(a)>-1}}function hasValue(a){return function(b){return b.value===a}}angular.module("sodukuAppInternal",[]),angular.module("sodukuApp",["sodukuAppInternal","sodukuTranslations","sodukuPreload","wixAngular","wix.common.bi"]).config(function(){});try{angular.module("sodukuPreload")}catch(e){angular.module("sodukuPreload",[])}angular.module("sodukuPreload").run(["$templateCache",function(a){a.put("views/main.html","<div class='main' ng-controller='MainController as main'>\n  <button ng-click='main.solve(true)'>solve!</button>\n  <input id='showPossibilities' ng-model='main.showPossibilities' type='checkbox'>\n  <label for='showPossibilities'>show possibilities</label>\n  <input id='showCode' ng-model='main.showCode' type='checkbox'>\n  <label for='showCode'>show code</label>\n  <table>\n    <tr ng-init='rowScope = this' ng-repeat='row in main.cells'>\n      <td ng-repeat='cell in row' style='{{main.getStyle(rowScope.$index, $index)}}'>\n        <input ng-model='cell.value' style='width: 30px' type='number'>\n        {{main.showPossibilities ? cell.possibilities : ''}}\n      </td>\n    </tr>\n  </table>\n  <pre>{{main.showCode ? main.code : ''}}</pre>\n</div>\n")}]);var TABLE_WIDTH=16,BOX_WIDTH=4,BOX_HEIGHT=4,Cell=function(){function a(a){this.value=a}return Object.defineProperty(a.prototype,"value",{get:function(){return this._value},set:function(a){this._value=a,this.possibilities=[]},enumerable:!0,configurable:!0}),a}(),MainController=function(){function a(a){function b(a){return new Cell(a)}this.$timeout=a,this.code="code is generated when you click the solve button",this.cells=[];for(var c=0;TABLE_WIDTH>c;c++){for(var d=[],e=0;TABLE_WIDTH>e;e++)d.push(b());this.cells.push(d)}this.cells=[[b(13),b(5),b(),b(),b(10),b(),b(11),b(3),b(),b(15),b(),b(8),b(),b(),b(),b()],[b(16),b(),b(),b(),b(),b(),b(),b(9),b(),b(),b(13),b(),b(),b(6),b(),b()],[b(8),b(11),b(3),b(2),b(),b(),b(),b(),b(),b(5),b(),b(),b(13),b(),b(4),b(14)],[b(),b(),b(6),b(10),b(),b(15),b(),b(),b(),b(),b(),b(14),b(),b(2),b(),b()],[b(),b(),b(),b(12),b(6),b(),b(1),b(),b(13),b(),b(),b(11),b(7),b(),b(),b(9)],[b(6),b(2),b(16),b(1),b(),b(),b(5),b(),b(),b(),b(),b(9),b(3),b(),b(),b(15)],[b(3),b(),b(),b(),b(),b(12),b(2),b(14),b(),b(6),b(),b(),b(),b(),b(16),b()],[b(7),b(),b(),b(),b(11),b(3),b(),b(8),b(),b(),b(),b(),b(14),b(10),b(),b(2)],[b(15),b(),b(2),b(5),b(),b(),b(),b(),b(9),b(),b(7),b(13),b(),b(),b(),b(10)],[b(),b(4),b(),b(),b(),b(),b(6),b(),b(12),b(1),b(14),b(),b(),b(),b(),b(13)],[b(1),b(),b(),b(7),b(16),b(),b(),b(),b(),b(8),b(),b(),b(6),b(4),b(5),b(12)],[b(9),b(),b(),b(13),b(2),b(),b(),b(7),b(),b(11),b(),b(4),b(16),b(),b(),b()],[b(),b(),b(1),b(),b(5),b(),b(),b(),b(),b(),b(12),b(),b(11),b(8),b(),b()],[b(2),b(12),b(),b(11),b(),b(),b(14),b(),b(),b(),b(),b(),b(15),b(1),b(13),b(6)],[b(),b(),b(9),b(),b(),b(8),b(),b(),b(6),b(),b(),b(),b(),b(),b(),b(16)],[b(),b(),b(),b(),b(15),b(),b(4),b(),b(8),b(14),b(),b(7),b(),b(),b(9),b(5)]]}return a.$inject=["$timeout"],a.prototype.generateCode=function(){function a(a,b,c){return a>0&&a%b===0?c:""}function b(a,b,c){var d=(a||"")+"";return(b+"").replace(/./g,c).slice(d.length)+d}return"this.cells = [\n"+this.cells.map(function(c,d){return a(d,BOX_HEIGHT,"\n")+"  ["+c.map(function(c,d){return a(d,BOX_WIDTH,"/**/ ")+"c("+b(c.value,TABLE_WIDTH," ")+")"}).join(", ")+"]"}).join(",\n")+"\n];\n\n"},a.prototype.getStyle=function(a,b){function c(a){return"border-"+a+": solid black 1px; "}return(a%BOX_HEIGHT===0?c("top"):"")+(a%BOX_HEIGHT===BOX_HEIGHT-1?c("bottom"):"")+(b%BOX_WIDTH===0?c("left"):"")+(b%BOX_WIDTH===BOX_WIDTH-1?c("right"):"")},a.prototype.getBox=function(a,b){var c=[];a-=a%BOX_HEIGHT,b-=b%BOX_WIDTH;for(var d=0;BOX_HEIGHT>d;d++)c=c.concat(this.cells[a+d].slice(b,b+BOX_WIDTH));return c},a.prototype.getRow=function(a){return this.cells[a]},a.prototype.getCol=function(a){return this.cells.map(function(b){return b[a]})},a.prototype.getAll=function(){return this.cells.reduce(function(a,b){return a.concat(b)},[])},a.prototype.someUnsolvedCell=function(a){return this.cells.some(function(b,c){return b.some(function(b,d){return!b.value&&a(b,c,d)})})},a.prototype.forEachUnsolvedCell=function(a){this.cells.forEach(function(b,c){b.forEach(function(b,d){b.value||a(b,c,d)})})},a.prototype.isInRow=function(a,b){return this.getRow(a).filter(hasValue(b)).length>0},a.prototype.isInCol=function(a,b){return this.getCol(a).filter(hasValue(b)).length>0},a.prototype.isInBox=function(a,b,c){return this.getBox(a,b).filter(hasValue(c)).length>0},a.prototype.otherOptionInRow=function(a,b){return this.getRow(a).filter(hasPossibility(b)).length>1},a.prototype.otherOptionInCol=function(a,b){return this.getCol(a).filter(hasPossibility(b)).length>1},a.prototype.otherOptionInBox=function(a,b,c){return this.getBox(a,b).filter(hasPossibility(c)).length>1},a.prototype.getPossibleValues=function(a,b){for(var c=[],d=1;TABLE_WIDTH>=d;d++)this.isInRow(a,d)||this.isInCol(b,d)||this.isInBox(a,b,d)||c.push(d);return c},a.prototype.otherOptionInTable=function(a,b,c){return this.otherOptionInRow(a,c)&&this.otherOptionInCol(b,c)&&this.otherOptionInBox(a,b,c)},a.prototype.solveByOnlyPossibility=function(){return this.someUnsolvedCell(function(a,b,c){return 1===a.possibilities.length?(a.value=a.possibilities[0],!0):void 0})},a.prototype.solveByNoOtherOptionInTable=function(){var a=this;return this.someUnsolvedCell(function(b,c,d){var e=b.possibilities.filter(function(b){return!a.otherOptionInTable(c,d,b)});return 1===e.length?(b.value=e[0],!0):void 0})},a.prototype.solve=function(a){var b=this;a&&(this.code=this.generateCode()),this.forEachUnsolvedCell(function(a,c,d){a.possibilities=b.getPossibleValues(c,d)}),this.solveByOnlyPossibility()||this.solveByNoOtherOptionInTable()?this.$timeout(function(){return b.solve()},10):this.getAll().filter(function(a){return!a.value}).length>0?this.$timeout(function(){return alert("stuck!!!")},0):this.$timeout(function(){return alert("done!!!")},0)},a}();angular.module("sodukuAppInternal").controller("MainController",MainController);
//# sourceMappingURL=scripts.js.map