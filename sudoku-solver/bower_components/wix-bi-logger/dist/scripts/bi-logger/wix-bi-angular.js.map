{"version":3,"file":"wix-bi-angular.js","sources":["../../concat/scripts/bi-logger/wix-bi-angular.js"],"names":["angular","module","factory","W","BI","Logger","DomEventHandler","ErrorSeverity","RECOVERABLE","WARNING","ERROR","FATAL","Categories","EDITOR","VIEWER","TIMEOUTS","SERVER","now","Date","getTime","startTime","defaultEventArgs","_","defaultErrorArgs","ts","cat","sev","iss","ver","_initOptions","hostName","biUrl","adapter","error","str","EVENT_IDS","ON_READY","ROUTE_CHANGE","_extend","dst","i","arguments","length","extending","key","biLogger","args","_lastBiUrl","url","undefined","assertEmpty","this","resolve","callback","clear","_options","fieldParsers","FieldParsers","injector","_log","eventArgs","_biFieldsRestrictions","src","type","evid","eventParams","_validateBiEventArgs","_sendBiEvent","_error","errorArgs","_requiredErrorFields","_errorFieldsRestrictions","values","errc","httpc","maxLength","errscp","subStr","trgt","gsi","uid","ut","did","cid","lng","dsc","errorParams","_reportOnReady","viewName","_onReadyFieldsRestrictions","view","_reportRouteChange","_routeChangeFieldsRestrictions","requiredArgs","restrictions","missingRequiredArgs","slice","currentRestrictions","parse","valid","missingIndex","indexOf","splice","join","_addUrlParams","params","delimiter","match","replace","Object","keys","map","encodeURIComponent","frogAdapter","biImage","Image","onComplete","onload","onerror","log","reportOnReady","reportRouteChange","getLastBiUrl","_wixBiAttributeSelector","_wixBiArgsAttribute","eventMap","errorMap","eventHandler","_biLogger","_safeGetEventParams","eventName","explicitParams","errorName","_getAttr","element","name","attributes","value","_handleTriggeredBiEvent","event","target","eventArgsStr","eval","_bind","document","body","addEventListener","_unbind","removeEventListener","bind","unbind","$injector","validators","val","parsers","substr","Math","min","invoke","directive","domBiLogger","convertAttrToConst","attr","toUpperCase","restrict","priority","link","pre","scope","eventType","wixBiEvent","wixBi","$eval","wixBiArgs","provider","recursiveExtend","_config","setConfig","config","$get","extend","getConfig","$inject","constant","isObject","v","constructor","Array","applyModifications","conf","partial","k","hasOwnProperty","biLoggerProvider","domBiLoggerProvider","$q","$rootScope","$window","reportedToNewRelic","makeCb","defer","$apply","getReducedMap","reduce","prev","isNewRelicDefined","NREUM","promise","finished","events","errors"],"mappings":"AACA;;AAEAA,QAAQC,OAAO,qBACZC,QAAQ,UAAU;IACjB,OAAOC,EAAEC,GAAGC;GAEbH,QAAQ,mBAAmB;IAC1B,OAAOC,EAAEC,GAAGE;;;AAIhB;;AAEA,IAAIH,IAAIA;;AACRA,EAAEC,KAAKD,EAAEC;;AAETD,EAAEC,GAAGG;IACHC,aAAa;IACbC,SAAS;IACTC,OAAO;IACPC,OAAO;;;AAGTR,EAAEC,GAAGQ;IACHC,QAAQ;IACRC,QAAQ;IACRC,UAAU;IACVC,QAAQ;;;AAGVb,EAAEC,GAAGC,SAAU;IACb,SAASY;QACP,OAAO,IAAIC,OAAOC;;IAEpB,IAAIC,YAAYH;IAEhB,IAAII;QACFC,GAAGL;;IAGL,IAAIM;QACFD,GAAGL;QACHO,IAAI;YACF,OAAOP,QAAQG;;QAEjBK,KAAKtB,EAAEC,GAAGQ,WAAWE;QACrBY,KAAKvB,EAAEC,GAAGG,cAAcE;QACxBkB,KAAK;QACLC,KAAK;;IAGP,IAAIC;QAEFC,UAAU;QAGVT;QAGAE;QAGAQ,OAAO;QAGPC,SAAS;QAGTC,OAAO,SAAUC;YACf,MAAMA;;;IAIV,IAAIC;QACFzB,OAAO;QACP0B,UAAU;QACVC,cAAc;;IAGhB,SAASC,QAAQC;QACf,KAAK,IAAIC,IAAI,GAAGA,IAAIC,UAAUC,QAAQF,KAAK;YACzC,IAAIG,YAAYF,UAAUD;YAC1B,IAAIG,WAAW;gBACb,KAAK,IAAIC,OAAOD,WAAW;oBACzBJ,IAAIK,OAAOD,UAAUC;;;;QAI3B,OAAOL;;IAGT,SAASM,SAASC;QAChB,IAAIC;YACFC,KAAKC;YACLC,aAAa;gBACX,IAAIC,KAAKH,QAAQC,WAAW;oBAC1B,MAAM;;;YAGVG,SAAS;gBACPD,KAAKE;;YAEPC,OAAO;gBACLH,KAAKH,MAAMC;;;QAIf,IAAIM;QACJ,IAAIC,eAAe,IAAIrD,EAAEC,GAAGqD,aAAaX,KAAKY;QAE9C,IAAIZ,KAAKhB,UAAU;YACjBgB,KAAKf,QAAQ,OAAOe,KAAKhB,WAAW;;QAEtCyB,WAAWjB,YAAYT,cAAciB;QAErC,SAASa,KAAKC,WAAWP;YACvB,IAAIQ;gBACFC;oBAAOC,MAAM;;gBACbC;oBAAQD,MAAM;;;YAGhB,IAAIE,cAAc3B,YAAYjB,kBAAkBkC,SAASlC,kBAAkBuC;YAE3E,IAAIM,qBAAqBD,eAAc,UAASJ,wBAAwB;gBACtEM,aAAaF,aAAaZ;;;QAI9B,SAASe,OAAOC,WAAWhB;YACzB,IAAIiB,yBAAwB,QAAQ,OAAO,OAAQ,OAAO,QAAQ;YAClE,IAAIC;gBACFT;oBAAOC,MAAM;;gBACbC;oBAAQD,MAAM;oBAAUS,UAASrC,UAAUzB;;gBAC3Ce;oBAAOsC,MAAM;oBAAUS,UAASrE,EAAEC,GAAGQ,WAAWC,QAAQV,EAAEC,GAAGQ,WAAWE,QAAQX,EAAEC,GAAGQ,WAAWG,UAAUZ,EAAEC,GAAGQ,WAAWI;;gBAC1HW;oBAAOoC,MAAM;;gBACbrC;oBAAOqC,MAAM;oBAAUS,UAASrE,EAAEC,GAAGG,cAAcC,aAAaL,EAAEC,GAAGG,cAAcE,SAASN,EAAEC,GAAGG,cAAcG,OAAOP,EAAEC,GAAGG,cAAcI;;gBACzI8D;oBAAQV,MAAM;;gBACdW;oBAASX,MAAM;;gBACfnC;oBAAOmC,MAAM;oBAAUY,WAAW;;gBAClCC;oBAAUb,MAAM;oBAAUc,QAAQ;;gBAClCC;oBAAQf,MAAM;oBAAUc,QAAQ;;gBAChCE;oBAAOhB,MAAM;oBAAUrB,QAAQ;;gBAC/BlB;oBAAMuC,MAAM;;gBACZiB;oBAAOjB,MAAM;;gBACbkB;oBAAMlB,MAAM;oBAAUY,WAAW;;gBACjCO;oBAAOnB,MAAM;oBAAUY,WAAW;;gBAClCQ;oBAAOpB,MAAM;oBAAUrB,QAAQ;;gBAC/B0C;oBAAOrB,MAAM;oBAAUY,WAAW;;gBAClCU;oBAAOtB,MAAM;oBAAUc,QAAQ;;;YAGjC,IAAIS,cAAchD,YAAYf,kBAAkBgC,SAAShC,kBAAkB8C;gBAAYL,MAAM7B,UAAUzB;;YAEvG,IAAIwD,qBAAqBoB,aAAahB,sBAAsBC,2BAA2B;gBACrFJ,aAAamB,aAAajC;;;QAI9B,SAASkC,eAAeC,UAAU5B,WAAWP;YAC3C,IAAIoC;gBACFC;oBAAQ3B,MAAM;;;YAGhB,IAAIE,cAAc3B,YAAYsB;gBAAYI,MAAM7B,UAAUC;gBAAUsD,MAAMF;;YAC1E,IAAItB,qBAAqBD,eAAc,UAASwB,6BAA6B;gBAC3E9B,KAAKM,aAAaZ;;;QAItB,SAASsC,mBAAmBH,UAAU5B,WAAWP;YAC/C,IAAIuC;gBACFF;oBAAQ3B,MAAM;;;YAGhB,IAAIE,cAAc3B,YAAYsB;gBAAYI,MAAM7B,UAAUE;gBAAcqD,MAAMF;;YAC9E,IAAItB,qBAAqBD,eAAc,UAAS2B,iCAAiC;gBAC/EjC,KAAKM,aAAaZ;;;QAItB,SAASa,qBAAqBN,WAAWiC,cAAcC;YACrD,IAAIC,sBAAsBF,aAAaG,MAAM;YAC7C,KAAK,IAAIpD,OAAOgB,WAAW;gBAEzB,IAAIqC,sBAAsBH,aAAalD;gBAEvCgB,UAAUhB,OAAOY,aAAa0C,MAAMtC,UAAUhB,MAAMqD;gBACpD,KAAKzC,aAAa2C,MAAMvC,UAAUhB,MAAMqD,sBAAsB;oBAC5D1C,SAAStB,MAAM,2BAA2BW,MAAM,cAAcgB,UAAUhB,OAAO;oBAC/E;;gBAIF,IAAIwD;gBACJ,KAAKA,eAAeL,oBAAoBM,QAAQzD,SAAS,GAAG;oBAC1DmD,oBAAoBO,OAAOF,cAAc;;;YAI7C,IAAIL,oBAAoBrD,SAAS,GAAG;gBAClCa,SAAStB,MAAM,8BAA8B8D,oBAAoBQ,KAAK;gBACtE,OAAO;;YAGT,OAAO;;QAGT,SAASC,cAAcxD,KAAKyD;YAC1B,IAAIC,YAAY1D,IAAI2D,MAAM,SAAS,MAAM;YACzC,OAAO3D,IAAI4D,QAAQ,OAAO,MAAMF,YAAYG,OAAOC,KAAKL,QAAQM,IAAI,SAAUnE;gBAC5E,SAAQoE,mBAAmBpE,MAAM,KAAKoE,mBAAmBP,OAAO7D,QAAO2D,KAAK;eAC3EA,KAAK;;QAGV,SAASpC,aAAaP,WAAWP;YAE/B,IAAI4D,cAAcrD,UAAU5B,WAAWuB,SAASvB;mBACzC4B,UAAU5B;YAEjB,IAAIgB,MAAMwD,cAAcjD,SAASxB,QAAQkF,aAAarD;YAEtD,IAAIsD,UAAU,IAAIC,MAAM,GAAG;YAC3B,IAAIC,aAAa/D,YAAY;YAE7B6D,QAAQG,SAASD;YACjBF,QAAQI,UAAUF;YAClBF,QAAQpD,MAAMd;YAGdD,WAAWC,MAAMA;YACjBD,WAAWM,WAAWA;;QAGxB;YACEkE,KAAK5D;YACL6D,eAAejC;YACfkC,mBAAmB9B;YACnB1D,OAAOmC;YAEPsD,cAAc;gBACZ,OAAO3E;;;;IAKb,OAAOF;;;AAIT;;AAEA,IAAI1C,IAAIA;;AACRA,EAAEC,KAAKD,EAAEC;;AAETD,EAAEC,GAAGE,kBAAmB;IACtB,IAAIqH,0BAA0B,UAC5BC,sBAAsB,eACtB/F;QAMEgG;QAGAC;QAGA7F,OAAO,SAAUC;YACf,MAAMA;;;IAIZ,SAASI,QAAQC;QACf,KAAK,IAAIC,IAAI,GAAGA,IAAIC,UAAUC,QAAQF,KAAK;YACzC,IAAIG,YAAYF,UAAUD;YAC1B,IAAIG,WAAW;gBACb,KAAK,IAAIC,OAAOD,WAAW;oBACzBJ,IAAIK,OAAOD,UAAUC;;;;QAI3B,OAAOL;;IAGT,SAASwF,aAAalF,UAAUC;QAC9B,IAAIS;QACJ,IAAIyE,YAAYnF;QAEhBU,WAAWjB,YAAYT,cAAciB;QAErC,SAASmF,oBAAoBC,WAAWL,UAAUM;YAChD,IAAI1B;YAGJ,KAAKoB,aAAaA,SAASK,YAAY;gBACrC3E,SAAStB,MAAM;gBACfwE;mBACK;gBACLA,SAASoB,SAASK;;YAIpB,OAAO5F,YAAYmE,QAAQ0B;;QAG7B,SAASxE,KAAKuE,WAAWtE,WAAWP;YAClC,IAAIY,cAAcgE,oBAAoBC,WAAW3E,SAASsE,UAAUjE;YACpEoE,UAAUT,IAAItD,aAAaZ;;QAG7B,SAASe,OAAOgE,WAAW/D,WAAWhB;YACpC,IAAIiC,cAAc2C,oBAAoBG,WAAW7E,SAASuE,UAAUzD;YACpE2D,UAAU/F,MAAMqD,aAAajC;;QAG/B,SAASgF,SAASC,SAASC;YACzB,KAAK,IAAI/F,IAAI,GAAGA,IAAI8F,QAAQE,WAAW9F,QAAQF,KAAK;gBAClD,IAAI8F,QAAQE,WAAWhG,GAAG+F,SAASA,MAAM;oBACvC,OAAOD,QAAQE,WAAWhG,GAAGiG;;;;QAKnC,SAASC,wBAAwBC;YAC/B,IAAIT,YAAYG,SAASM,MAAMC,QAAQjB;YACvC,IAAIO,WAAW;gBACb,IAAIW,eAAeR,SAASM,MAAMC,QAAQhB;gBAE1C,IAAIhE,YAAYiF,eAAeC,KAAK,iBAAiBD;gBAErDlF,KAAKuE,WAAWtE;;;QAIpB,SAASmF;YACPC,SAASC,KAAKC,iBAAiB,SAASR;;QAG1C,SAASS;YACPH,SAASC,KAAKG,oBAAoB,SAASV;;QAG7C;YACEW,MAAMN;YACNO,QAAQH;YACR5B,KAAK5D;YACL1B,OAAOmC;;;IAIX,OAAO2D;;;AAGT;;AAEA,IAAI5H,IAAIA;;AACRA,EAAEC,KAAKD,EAAEC;;AACTD,EAAEC,GAAGqD,eAAe,SAAU8F;IAC5B,IAAIC;QACF9G,QAAQ,SAAU+G,KAAK/G;YACrB,OAAO+G,OAAOA,IAAI/G,WAAWO,aAAawG,IAAI/G,WAAWA;;QAE3DiC,WAAW,SAAU8E,KAAK9E;YACxB,OAAO8E,OAAOA,IAAI/G,WAAWO,aAAawG,IAAI/G,UAAUiC;;QAE1DH,QAAQ,SAAUiF,KAAKjF;YACrB,OAAOA,UAAUA,OAAO6B,QAAQoD,UAAU;;QAE5C1F,MAAM,SAAU0F,KAAK1F;YACnB,OAAO0F,cAAcA,QAAQ1F;;;IAIjC,IAAI2F;QACF7E,QAAQ,SAAU4E,KAAK/G;YACrB,IAAI+G,OAAOA,IAAIE,QAAQ;gBACrB,OAAOF,IAAIE,OAAO,GAAGC,KAAKC,IAAIJ,IAAI/G,QAAQA;;YAE5C,OAAO+G;;;IAIXtG,KAAKgD,QAAQ,SAAUsC,OAAO3C;QAC5B,KAAK,IAAIlD,OAAOkD,cAAc;YAC5B,IAAI0D,WAAW5G,SAAS4G,WAAW5G,KAAK6F,OAAO3C,aAAalD,OAAO;gBACjE,OAAO;;;QAGX,OAAO;;IAGTO,KAAK+C,QAAQ,SAAUuC,OAAO3C;QAC5B,WAAW2C,UAAU,YAAY;YAC/BA,QAAQc,YAAYA,UAAUO,OAAOrB,SAASA;;QAEhD,KAAK,IAAI7F,OAAOkD,cAAc;YAC5B2C,QAAQiB,QAAQ9G,OAAO8G,QAAQ9G,KAAK6F,OAAO3C,aAAalD,QAAQ6F;;QAElE,OAAOA;;;;AAIX;;AAOAzI,QAAQC,OAAO,iBACZ8J,UAAU,WAAU,eAAe,SAAUC;IAC5C,SAASC,mBAAmBC;QAC1B,OAAOA,KAAKtD,QAAQ,MAAM,KAAKuD;;IAGjC;QACEC,UAAU;QACVC,UAAU;QACVC;YAEEC,KAAK,SAAUC,OAAOlC,SAAS4B;gBAC7B,IAAIO,YAAYP,KAAKQ,cAAc;gBAEnCpC,QAAQe,KAAKoB,WAAW;oBACtB,IAAIvC,YAAY+B,mBAAmBC,KAAKS;oBACxC,IAAI/G,YAAY4G,MAAMI,MAAMV,KAAKW;oBACjCb,YAAYzC,IAAIW,WAAWtE;;;;;;;AAOvC;;AAEA5D,QAAQC,OAAO,iBACZ6K,SAAS,cAAa,mBAAmB,SAAUC;IAClD,IAAIC;QAAWnD;;IAEf1E,KAAK8H,YAAY,SAAUC;QACzBH,gBAAgBC,SAASE;;IAI3B/H,KAAKgI,SAAQ,UAAU,aAAa,SAAU9K,QAAQkJ;QACpDyB,QAAQtH,WAAW6F;QACnB,OAAOvJ,QAAQoL,OAAO,IAAI/K,OAAO2K;YAC/BK,WAAW;gBACT,OAAOL;;;;IAIb7H,KAAKgI,KAAKG,YAAW,UAAU;;;AAGnC;;AAEAtL,QAAQC,OAAO,iBACZ6K,SAAS,iBAAgB,mBAAmB,SAAUC;IACrD,IAAIC;QAAWnD;;IAEf1E,KAAK8H,YAAY,SAAUC;QACzBH,gBAAgBC,SAASE;;IAI3B/H,KAAKgI,SAAQ,YAAY,mBAAmB,SAAUtI,UAAUvC;QAC9D,OAAON,QAAQoL,OAAO,IAAI9K,gBAAgBuC,UAAUmI;YAClDK,WAAW;gBACT,OAAOL;;;;IAIb7H,KAAKgI,KAAKG,YAAW,YAAY;;;AAGrC;;AAEAtL,QAAQC,OAAO,iBACZsL,SAAS,mBAAoB;IAE5B,SAASC,SAASC;QAChB,OAAOA,MAAM,eAAeA,MAAM,YAAYA,EAAEC,gBAAgBC;;IAGlE,SAASC,mBAAmBC,MAAMC;QAChC,KAAK,IAAIC,KAAKD,SAAS;YACrB,IAAIA,QAAQE,eAAeD,IAAI;gBAC7B,IAAIP,SAASM,QAAQC,KAAK;oBACxBF,KAAKE,KAAKF,KAAKE;oBACfH,mBAAmBC,KAAKE,IAAID,QAAQC;uBAC/B;oBACLF,KAAKE,KAAKD,QAAQC;;;;;IAM1B,OAAOH;;;AAIX;;AAEA5L,QAAQC,OAAO,iBACZ6K,SAAS,iBAAgB,oBAAoB,uBAAuB,SAAUmB,kBAAkBC;IAE/F/I,KAAK8H,YAAY,SAAUC;QACzBe,iBAAiBhB,UAAUC;QAC3BgB,oBAAoBjB,UAAUC;;IAIhC/H,KAAKgI,SAAQ,YAAY,eAAe,MAAM,cAAc,WAAW,SAAUtI,UAAUmH,aAAamC,IAAIC,YAAYC;QACtH,IAAIrB,UAAUhL,QAAQoL,WAAWvI,SAASwI,aAAarB,YAAYqB;QAEnE,IAAIiB,qBAAqB;QAEzB,SAASC,OAAOC;YACd,OAAO;gBACLJ,WAAWK,OAAO;oBAChBD,MAAMpJ;;;;QAKZ,SAASsJ,cAAc3F;YACrB,OAAOF,OAAOC,KAAKkE,QAAQjE,YAAY4F,OAAO,SAAUC,MAAMhK;gBAC5DgK,KAAKhK,OAAOA;gBACZ,OAAOgK;;;QAIX,SAASC;YACP,cAAcR,QAAQS,UAAU;;QAGlC;YACEvF,KAAK,SAAUW,WAAWtE;gBACxB,IAAI4I,QAAQL,GAAGK;gBACf,WAAWtE,cAAc,aAAaA,WAAW;oBAC/C8B,YAAYzC,IAAIW,WAAWtE,WAAW2I,OAAOC;uBACxC;oBACL3J,SAAS0E,IAAIW,WAAWqE,OAAOC;;gBAEjC,OAAOA,MAAMO;;YAEf9K,OAAO,SAAUiG,WAAWtE;gBAC1B,IAAI4I,QAAQL,GAAGK;gBACf,WAAWtE,cAAc,UAAU;oBACjC8B,YAAY/H,MAAMiG,WAAWtE,WAAW2I,OAAOC;uBAC1C;oBACL3J,SAASZ,MAAMiG,WAAWqE,OAAOC;;gBAEnC,OAAOA,MAAMO;;YAEfvF,eAAe,SAAUhC,UAAU5B;gBACjC,IAAI4I,QAAQL,GAAGK;gBACf,KAAKF,sBAAsBO,qBAAqB;oBAC9CR,QAAQS,MAAME;oBACdV,qBAAqB;;gBAEvBzJ,SAAS2E,cAAchC,UAAU5B,WAAW2I,OAAOC;gBACnD,OAAOA,MAAMO;;YAEftF,mBAAmB,SAAUjC,UAAU5B;gBACrC,IAAI4I,QAAQL,GAAGK;gBACf3J,SAAS4E,kBAAkBjC,UAAU5B,WAAW2I,OAAOC;gBACvD,OAAOA,MAAMO;;YAEfrF,cAAc;gBACZ,OAAO7E,SAAS6E;;YAElBuF,QAAQP,cAAc;YACtBQ,QAAQR,cAAc;YACtBrB,WAAW;gBACT,OAAOrL,QAAQoL,WAAWvI,SAASwI,aAAarB,YAAYqB;;;;IAIlElI,KAAKgI,KAAKG,YAAW,YAAY,eAAe,MAAM,cAAc"}