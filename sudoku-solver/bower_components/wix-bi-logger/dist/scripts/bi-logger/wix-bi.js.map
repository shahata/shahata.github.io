{"version":3,"file":"wix-bi.js","sources":["../../concat/scripts/bi-logger/wix-bi.js"],"names":["W","BI","ErrorSeverity","RECOVERABLE","WARNING","ERROR","FATAL","Categories","EDITOR","VIEWER","TIMEOUTS","SERVER","Logger","now","Date","getTime","startTime","defaultEventArgs","_","defaultErrorArgs","ts","cat","sev","iss","ver","_initOptions","hostName","biUrl","adapter","error","str","EVENT_IDS","ON_READY","ROUTE_CHANGE","_extend","dst","i","arguments","length","extending","key","biLogger","args","_lastBiUrl","url","undefined","assertEmpty","this","resolve","callback","clear","_options","fieldParsers","FieldParsers","injector","_log","eventArgs","_biFieldsRestrictions","src","type","evid","eventParams","_validateBiEventArgs","_sendBiEvent","_error","errorArgs","_requiredErrorFields","_errorFieldsRestrictions","values","errc","httpc","maxLength","errscp","subStr","trgt","gsi","uid","ut","did","cid","lng","dsc","errorParams","_reportOnReady","viewName","_onReadyFieldsRestrictions","view","_reportRouteChange","_routeChangeFieldsRestrictions","requiredArgs","restrictions","missingRequiredArgs","slice","currentRestrictions","parse","valid","missingIndex","indexOf","splice","join","_addUrlParams","params","delimiter","match","replace","Object","keys","map","encodeURIComponent","frogAdapter","biImage","Image","onComplete","onload","onerror","log","reportOnReady","reportRouteChange","getLastBiUrl","DomEventHandler","_wixBiAttributeSelector","_wixBiArgsAttribute","eventMap","errorMap","eventHandler","_biLogger","_safeGetEventParams","eventName","explicitParams","errorName","_getAttr","element","name","attributes","value","_handleTriggeredBiEvent","event","target","eventArgsStr","eval","_bind","document","body","addEventListener","_unbind","removeEventListener","bind","unbind","$injector","validators","val","parsers","substr","Math","min","invoke"],"mappings":"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"}