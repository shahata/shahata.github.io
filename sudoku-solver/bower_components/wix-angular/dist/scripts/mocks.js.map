{"version":3,"file":"mocks.js","sources":["../concat/scripts/mocks.js"],"names":["angular","module","run","$httpBackend","keyStorage","siteStorage","getKeyRegExp","getSiteRegExp","addToStorage","key","value","siteId","whenPOST","respond","method","url","data","response","payload","JSON","parse","blob","whenGET","match","tokens","passThrough","whenPUT","whenDELETE","factory","userGUID","userName"],"mappings":"AAAA;;AAEAA,QAAQC,OAAO,wBAAuB,eACnCC,MAAK,gBAAgB,SAAUC;IAE9B,IAAIC;IACJ,IAAIC;IACJ,IAAIC,eAAe;IACnB,IAAIC,gBAAgB;IAEpB,SAASC,aAAaC,KAAKC,OAAOC;QAChCP,WAAWK,OAAOC;QAClB,IAAIC,QAAQ;YACV,KAAKN,YAAYM,SAAS;gBACxBN,YAAYM;;YAEdN,YAAYM,QAAQF,OAAOC;;;IAI/BP,aAAaS,SAAS,yCAAyCC,QAAQ,SAAUC,QAAQC,KAAKC;QAC5F,IAAIC;QACJ,IAAIC,UAAUC,KAAKC,MAAMJ;QACzB,IAAIP,MAAMS,QAAQT;QAClB,IAAIC,QAAQQ,QAAQG;QACpB,IAAIV,SAASO,QAAQP;QAErBH,aAAaC,KAAKC,OAAOC;QACzBM,SAASR,OAAOC;QAEhB,SAAQ,KAAKO;;IAGfd,aAAamB,QAAQhB,cAAcO,QAAQ,SAAUC,QAAQC;QAC3D,IAAIN,MAAMM,IAAIQ,MAAMjB,cAAc;QAClC,IAAIW;QACJ,IAAIR,OAAOL,YAAY;YACrBa,SAASR,OAAOL,WAAWK;YAC3B,SAAQ,KAAKQ;eACR;YACL,SAAQ;;;IAIZd,aAAamB,QAAQf,eAAeM,QAAQ,SAAUC,QAAQC;QAC5D,IAAIS,SAAST,IAAIQ,MAAMhB;QACvB,IAAII,SAASa,OAAO;QACpB,IAAIf,MAAMe,OAAO;QACjB,IAAIP;QACJ,IAAIZ,YAAYM,WAAWF,OAAOJ,YAAYM,SAAS;YACrDM,SAASR,OAAOJ,YAAYM,QAAQF;YACpC,SAAQ,KAAKQ;eACR;YACL,SAAQ;;;IAIZd,aAAamB,QAAQ,MAAMG;IAC3BtB,aAAaS,SAAS,MAAMa;IAC5BtB,aAAauB,QAAQ,MAAMD;IAC3BtB,aAAawB,WAAW,MAAMF;KAE/BG,QAAQ,cAAc;IACrB;QACEC,UAAU;QACVC,UAAU","sourcesContent":["'use strict';\n\nangular.module('wixAngularAppMocks', ['ngMockE2E'])\n  .run([\"$httpBackend\", function ($httpBackend) {\n\n    var keyStorage = {};\n    var siteStorage = {};\n    var getKeyRegExp = /^\\/_api\\/wix-user-preferences-webapp\\/getVolatilePrefForKey\\/wixAngularStorage\\/([^\\/]*)$/;\n    var getSiteRegExp = /^\\/_api\\/wix-user-preferences-webapp\\/getVolatilePrefForSite\\/wixAngularStorage\\/([^\\/]*)\\/([^\\/]*)$/;\n\n    function addToStorage(key, value, siteId) {\n      keyStorage[key] = value;\n      if (siteId) {\n        if (!siteStorage[siteId]) {\n          siteStorage[siteId] = {};\n        }\n        siteStorage[siteId][key] = value;\n      }\n    }\n\n    $httpBackend.whenPOST('/_api/wix-user-preferences-webapp/set').respond(function (method, url, data) {\n      var response = {};\n      var payload = JSON.parse(data);\n      var key = payload.key;\n      var value = payload.blob;\n      var siteId = payload.siteId;\n\n      addToStorage(key, value, siteId);\n      response[key] = value;\n\n      return [200, response, {}];\n    });\n\n    $httpBackend.whenGET(getKeyRegExp).respond(function (method, url) {\n      var key = url.match(getKeyRegExp)[1];\n      var response = {};\n      if (key in keyStorage) {\n        response[key] = keyStorage[key];\n        return [200, response, {}];\n      } else {\n        return [404, {}, {}];\n      }\n    });\n\n    $httpBackend.whenGET(getSiteRegExp).respond(function (method, url) {\n      var tokens = url.match(getSiteRegExp);\n      var siteId = tokens[1];\n      var key = tokens[2];\n      var response = {};\n      if (siteStorage[siteId] && key in siteStorage[siteId]) {\n        response[key] = siteStorage[siteId][key];\n        return [200, response, {}];\n      } else {\n        return [404, {}, {}];\n      }\n    });\n\n    $httpBackend.whenGET(/.*/).passThrough();\n    $httpBackend.whenPOST(/.*/).passThrough();\n    $httpBackend.whenPUT(/.*/).passThrough();\n    $httpBackend.whenDELETE(/.*/).passThrough();\n  }])\n  .factory('wixCookies', function () {\n    return {\n      userGUID: '1234',\n      userName: 'loggedInUser'\n    };\n  });\n"]}